<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPagosAyuntHin: C:/xampp/htdocs/GPagosAyuntamiento/vendor/nette/schema Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPagosAyuntHin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_5baba132c04abf24a60cd5e36663db57.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">schema Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:src" id="r_src"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_2371a19f8241f2b91fa2378823893981.html">src</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p><a class="el" href="namespace_nette.html">Nette</a> <a class="el" href="class_schema.html">Schema</a> </p><hr  />
<p><a href="https://packagist.org/packages/nette/schema"><img src="https://img.shields.io/packagist/dm/nette/schema.svg" alt="Downloads this Month" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/nette/schema/actions"><img src="https://github.com/nette/schema/workflows/Tests/badge.svg?branch=master" alt="Tests" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/nette/schema?branch=master"><img src="https://coveralls.io/repos/github/nette/schema/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/nette/schema/releases"><img src="https://poser.pugx.org/nette/schema/v/stable" alt="Latest Stable Version" class="inline"/></a> <a href="https://github.com/nette/schema/blob/master/license.md"><img src="https://img.shields.io/badge/license-New%20BSD-blue.svg" alt="License" style="pointer-events: none;" class="inline"/></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md10037"></a>
Introduction</h1>
<p>A practical library for validation and normalization of data structures against a given schema with a smart &amp; easy-to-understand API.</p>
<p>Documentation can be found on the <a href="https://doc.nette.org/schema">website</a>.</p>
<p>Installation:</p>
<div class="fragment"><div class="line">composer require nette/schema</div>
</div><!-- fragment --><p>It requires PHP version 8.1 and supports PHP up to 8.4.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10038"></a>
<a href="https://github.com/sponsors/dg">Support Me</a></h2>
<p>Do you like <a class="el" href="namespace_nette.html">Nette</a> <a class="el" href="class_schema.html">Schema</a>? Are you looking forward to the new features?</p>
<p><a href="https://github.com/sponsors/dg"><img src="https://files.nette.org/icons/donation-3.svg" alt="Buy me a coffee" style="pointer-events: none;" class="inline"/></a></p>
<p>Thank you!</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10039"></a>
Basic Usage</h2>
<p>In variable <span class="tt">$schema</span> we have a validation schema (what exactly this means and how to create it we will say later) and in variable <span class="tt">$data</span> we have a data structure that we want to validate and normalize. This can be, for example, data sent by the user through an API, configuration file, etc.</p>
<p>The task is handled by the <a href="https://api.nette.org/schema/master/Nette/Schema/Processor.html">Nette\Schema\Processor</a> class, which processes the input and either returns normalized data or throws an <a href="https://api.nette.org/schema/master/Nette/Schema/ValidationException.html">Nette\Schema\ValidationException</a> exception on error.</p>
<div class="fragment"><div class="line">$processor = <span class="keyword">new</span> <a class="code hl_class" href="class_nette_1_1_schema_1_1_processor.html">Nette\Schema\Processor</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    $normalized = $processor-&gt;process($schema, $data);</div>
<div class="line">} <span class="keywordflow">catch</span> (<a class="code hl_namespace" href="namespace_nette.html">Nette</a>\Schema\ValidationException $e) {</div>
<div class="line">    echo <span class="stringliteral">&#39;Data is invalid: &#39;</span> . $e-&gt;getMessage();</div>
<div class="line">}</div>
<div class="ttc" id="aclass_nette_1_1_schema_1_1_processor_html"><div class="ttname"><a href="class_nette_1_1_schema_1_1_processor.html">Nette\Schema\Processor</a></div><div class="ttdef"><b>Definition</b> Processor.php:19</div></div>
<div class="ttc" id="anamespace_nette_html"><div class="ttname"><a href="namespace_nette.html">Nette</a></div></div>
</div><!-- fragment --><p>Method <span class="tt">$e-&gt;getMessages()</span> returns array of all message strings and <span class="tt">$e-&gt;getMessageObjects()</span> return all messages as <a href="https://api.nette.org/schema/master/Nette/Schema/Message.html">Nette\Schema\Message</a> objects.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10040"></a>
Defining Schema</h2>
<p>And now let's create a schema. The class <a href="https://api.nette.org/schema/master/Nette/Schema/Expect.html">Nette\Schema\Expect</a> is used to define it, we actually define expectations of what the data should look like. Let's say that the input data must be a structure (e.g. an array) containing elements <span class="tt">processRefund</span> of type bool and <span class="tt">refundAmount</span> of type int.</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_nette_1_1_schema_1_1_expect.html">Nette\Schema\Expect</a>;</div>
<div class="line"> </div>
<div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;processRefund&#39;</span> =&gt; Expect::bool(),</div>
<div class="line">    <span class="stringliteral">&#39;refundAmount&#39;</span> =&gt; Expect::int(),</div>
<div class="line">]);</div>
<div class="ttc" id="aclass_nette_1_1_schema_1_1_expect_html"><div class="ttname"><a href="class_nette_1_1_schema_1_1_expect.html">Nette\Schema\Expect</a></div><div class="ttdef"><b>Definition</b> Expect.php:33</div></div>
</div><!-- fragment --><p>We believe that the schema definition looks clear, even if you see it for the very first time.</p>
<p>Lets send the following data for validation:</p>
<div class="fragment"><div class="line">$data = [</div>
<div class="line">    <span class="stringliteral">&#39;processRefund&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&#39;refundAmount&#39;</span> =&gt; 17,</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">$normalized = $processor-&gt;process($schema, $data); <span class="comment">// OK, it passes</span></div>
</div><!-- fragment --><p>The output, i.e. the value <span class="tt">$normalized</span>, is the object <span class="tt">stdClass</span>. If we want the output to be an array, we add a cast to schema &lsquo;Expect::structure([...])-&gt;castTo('array&rsquo;)`.</p>
<p>All elements of the structure are optional and have a default value <span class="tt">null</span>. Example:</p>
<div class="fragment"><div class="line">$data = [</div>
<div class="line">    <span class="stringliteral">&#39;refundAmount&#39;</span> =&gt; 17,</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">$normalized = $processor-&gt;process($schema, $data); <span class="comment">// OK, it passes</span></div>
<div class="line"><span class="comment">// $normalized = {&#39;processRefund&#39; =&gt; null, &#39;refundAmount&#39; =&gt; 17}</span></div>
</div><!-- fragment --><p>The fact that the default value is <span class="tt">null</span> does not mean that it would be accepted in the input data &lsquo;'processRefund&rsquo; =&gt; null<span class="tt">. No, the input must be boolean, i.e. only </span>true<span class="tt"> or </span>false<span class="tt">. We would have to explicitly allow </span>null<span class="tt"> via </span>Expect::bool()-&gt;nullable()`.</p>
<p>An item can be made mandatory using <span class="tt">Expect::bool()-&gt;required()</span>. We change the default value to <span class="tt">false</span> using <span class="tt">Expect::bool()-&gt;default(false)</span> or shortly using <span class="tt">Expect::bool(false)</span>.</p>
<p>And what if we wanted to accept <span class="tt">1</span> and <span class="tt">0</span> besides booleans? Then we list the allowed values, which we will also normalize to boolean:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;processRefund&#39;</span> =&gt; Expect::anyOf(<span class="keyword">true</span>, <span class="keyword">false</span>, 1, 0)-&gt;castTo(<span class="stringliteral">&#39;bool&#39;</span>),</div>
<div class="line">    <span class="stringliteral">&#39;refundAmount&#39;</span> =&gt; Expect::int(),</div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">$normalized = $processor-&gt;process($schema, $data);</div>
<div class="line">is_bool($normalized-&gt;processRefund); <span class="comment">// true</span></div>
</div><!-- fragment --><p>Now you know the basics of how the schema is defined and how the individual elements of the structure behave. We will now show what all the other elements can be used in defining a schema.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10041"></a>
Data Types: type()</h2>
<p>All standard PHP data types can be listed in the schema:</p>
<div class="fragment"><div class="line">Expect::string(<a class="code hl_variable" href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = <span class="keyword">null</span>)</div>
<div class="line">Expect::<span class="keywordtype">int</span>(<a class="code hl_variable" href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = null)</div>
<div class="line">Expect::<span class="keywordtype">float</span>(<a class="code hl_variable" href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = null)</div>
<div class="line">Expect::<span class="keywordtype">bool</span>(<a class="code hl_variable" href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = null)</div>
<div class="line">Expect::null()</div>
<div class="line">Expect::array(<a class="code hl_variable" href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = [])</div>
<div class="ttc" id="atranslations_8php_html_a9df479534ecf05fd7575c6275d381687"><div class="ttname"><a href="translations_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a></div><div class="ttdeci">$default</div><div class="ttdef"><b>Definition</b> translations.php:117</div></div>
</div><!-- fragment --><p>And then all types <a href="https://doc.nette.org/validators#toc-validation-rules">supported by the Validators</a> via &lsquo;Expect::type('scalar&rsquo;)<span class="tt"> or abbreviated </span>Expect::scalar()<span class="tt">. Also class or interface names are accepted, e.g. </span>Expect::type('AddressEntity')`.</p>
<p>You can also use union notation:</p>
<div class="fragment"><div class="line">Expect::type(<span class="stringliteral">&#39;bool|string|array&#39;</span>)</div>
</div><!-- fragment --><p>The default value is always <span class="tt">null</span> except for <span class="tt">array</span> and <span class="tt">list</span>, where it is an empty array. (A list is an array indexed in ascending order of numeric keys from zero, that is, a non-associative array).</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10042"></a>
Array of Values: arrayOf() listOf()</h2>
<p>The array is too general structure, it is more useful to specify exactly what elements it can contain. For example, an array whose elements can only be strings:</p>
<div class="fragment"><div class="line">$schema = Expect::arrayOf(<span class="stringliteral">&#39;string&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;hello&#39;</span>, <span class="stringliteral">&#39;world&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span> =&gt; <span class="stringliteral">&#39;hello&#39;</span>, <span class="charliteral">&#39;b&#39;</span> =&gt; <span class="stringliteral">&#39;world&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;key&#39;</span> =&gt; 123]); <span class="comment">// ERROR: 123 is not a string</span></div>
</div><!-- fragment --><p>The second parameter can be used to specify keys (since version 1.2):</p>
<div class="fragment"><div class="line">$schema = Expect::arrayOf(<span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;int&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;hello&#39;</span>, <span class="stringliteral">&#39;world&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span> =&gt; <span class="stringliteral">&#39;hello&#39;</span>]); <span class="comment">// ERROR: &#39;a&#39; is not int</span></div>
</div><!-- fragment --><p>The list is an indexed array:</p>
<div class="fragment"><div class="line">$schema = Expect::listOf(<span class="stringliteral">&#39;string&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, 123]); <span class="comment">// ERROR: 123 is not a string</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;key&#39;</span> =&gt; <span class="charliteral">&#39;a&#39;</span>]); <span class="comment">// ERROR: is not a list</span></div>
<div class="line">$processor-&gt;process($schema, [1 =&gt; <span class="charliteral">&#39;a&#39;</span>, 0 =&gt; <span class="charliteral">&#39;b&#39;</span>]); <span class="comment">// ERROR: is not a list</span></div>
</div><!-- fragment --><p>The parameter can also be a schema, so we can write:</p>
<div class="fragment"><div class="line">Expect::arrayOf(Expect::bool())</div>
</div><!-- fragment --><p>The default value is an empty array. If you specify a default value, it will be merged with the passed data. This can be disabled using <span class="tt">mergeDefaults(false)</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10043"></a>
Enumeration: anyOf()</h2>
<p><span class="tt">anyOf()</span> is a set of values ​​or schemas that a value can be. Here's how to write an array of elements that can be either &lsquo;'a&rsquo;<span class="tt">, </span>true<span class="tt">, or </span>null`:</p>
<div class="fragment"><div class="line">$schema = Expect::listOf(</div>
<div class="line">    Expect::anyOf(<span class="charliteral">&#39;a&#39;</span>, <span class="keyword">true</span>, <span class="keyword">null</span>),</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, <span class="charliteral">&#39;a&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="keyword">false</span>]); <span class="comment">// ERROR: false does not belong there</span></div>
</div><!-- fragment --><p>The enumeration elements can also be schemas:</p>
<div class="fragment"><div class="line">$schema = Expect::listOf(</div>
<div class="line">    Expect::anyOf(Expect::string(), <span class="keyword">true</span>, <span class="keyword">null</span>),</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;foo&#39;</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, <span class="stringliteral">&#39;bar&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [123]); <span class="comment">// ERROR</span></div>
</div><!-- fragment --><p>The <span class="tt">anyOf()</span> method accepts variants as individual parameters, not as array. To pass it an array of values, use the unpacking operator <span class="tt">anyOf(...$variants)</span>.</p>
<p>The default value is <span class="tt">null</span>. Use the <span class="tt">firstIsDefault()</span> method to make the first element the default:</p>
<div class="fragment"><div class="line"><span class="comment">// default is &#39;hello&#39;</span></div>
<div class="line">Expect::anyOf(Expect::string(<span class="stringliteral">&#39;hello&#39;</span>), <span class="keyword">true</span>, <span class="keyword">null</span>)-&gt;firstIsDefault();</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10044"></a>
Structures</h2>
<p>Structures are objects with defined keys. Each of these key =&gt; value pairs is referred to as a "property":</p>
<p>Structures accept arrays and objects and return objects <span class="tt">stdClass</span> (unless you change it with &lsquo;castTo('array&rsquo;)`, etc.).</p>
<p>By default, all properties are optional and have a default value of <span class="tt">null</span>. You can define mandatory properties using <span class="tt">required()</span>:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;required&#39;</span> =&gt; Expect::string()-&gt;required(),</div>
<div class="line">    <span class="stringliteral">&#39;optional&#39;</span> =&gt; Expect::string(), <span class="comment">// the default value is null</span></div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;optional&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>]);</div>
<div class="line"><span class="comment">// ERROR: option &#39;required&#39; is missing</span></div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;required&#39;</span> =&gt; <span class="stringliteral">&#39;foo&#39;</span>]);</div>
<div class="line"><span class="comment">// OK, returns {&#39;required&#39; =&gt; &#39;foo&#39;, &#39;optional&#39; =&gt; null}</span></div>
</div><!-- fragment --><p>If you do not want to output properties with only a default value, use <span class="tt">skipDefaults()</span>:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;required&#39;</span> =&gt; Expect::string()-&gt;required(),</div>
<div class="line">    <span class="stringliteral">&#39;optional&#39;</span> =&gt; Expect::string(),</div>
<div class="line">])-&gt;skipDefaults();</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;required&#39;</span> =&gt; <span class="stringliteral">&#39;foo&#39;</span>]);</div>
<div class="line"><span class="comment">// OK, returns {&#39;required&#39; =&gt; &#39;foo&#39;}</span></div>
</div><!-- fragment --><p>Although <span class="tt">null</span> is the default value of the <span class="tt">optional</span> property, it is not allowed in the input data (the value must be a string). Properties accepting <span class="tt">null</span> are defined using <span class="tt">nullable()</span>:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;optional&#39;</span> =&gt; Expect::string(),</div>
<div class="line">    <span class="stringliteral">&#39;nullable&#39;</span> =&gt; Expect::string()-&gt;nullable(),</div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;optional&#39;</span> =&gt; <span class="keyword">null</span>]);</div>
<div class="line"><span class="comment">// ERROR: &#39;optional&#39; expects to be string, null given.</span></div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;nullable&#39;</span> =&gt; <span class="keyword">null</span>]);</div>
<div class="line"><span class="comment">// OK, returns {&#39;optional&#39; =&gt; null, &#39;nullable&#39; =&gt; null}</span></div>
</div><!-- fragment --><p>By default, there can be no extra items in the input data:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;key&#39;</span> =&gt; Expect::string(),</div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;additional&#39;</span> =&gt; 1]);</div>
<div class="line"><span class="comment">// ERROR: Unexpected item &#39;additional&#39;</span></div>
</div><!-- fragment --><p>Which we can change with <span class="tt">otherItems()</span>. As a parameter, we will specify the schema for each extra element:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;key&#39;</span> =&gt; Expect::string(),</div>
<div class="line">])-&gt;otherItems(Expect::int());</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;additional&#39;</span> =&gt; 1]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;additional&#39;</span> =&gt; <span class="keyword">true</span>]); <span class="comment">// ERROR</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10045"></a>
Deprecations</h2>
<p>You can deprecate property using the <span class="tt">deprecated([string $message])</span> method. Deprecation notices are returned by <span class="tt">$processor-&gt;getWarnings()</span>:</p>
<div class="fragment"><div class="line">$schema = Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;old&#39;</span> =&gt; Expect::int()-&gt;deprecated(<span class="stringliteral">&#39;The item %path% is deprecated&#39;</span>),</div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="stringliteral">&#39;old&#39;</span> =&gt; 1]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;getWarnings(); <span class="comment">// [&quot;The item &#39;old&#39; is deprecated&quot;]</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10046"></a>
Ranges: min() max()</h2>
<p>Use <span class="tt">min()</span> and <span class="tt">max()</span> to limit the number of elements for arrays:</p>
<div class="fragment"><div class="line"><span class="comment">// array, at least 10 items, maximum 20 items</span></div>
<div class="line">Expect::array()-&gt;min(10)-&gt;max(20);</div>
</div><!-- fragment --><p>For strings, limit their length:</p>
<div class="fragment"><div class="line"><span class="comment">// string, at least 10 characters long, maximum 20 characters</span></div>
<div class="line">Expect::string()-&gt;min(10)-&gt;max(20);</div>
</div><!-- fragment --><p>For numbers, limit their value:</p>
<div class="fragment"><div class="line"><span class="comment">// integer, between 10 and 20 inclusive</span></div>
<div class="line">Expect::int()-&gt;min(10)-&gt;max(20);</div>
</div><!-- fragment --><p>Of course, it is possible to mention only <span class="tt">min()</span>, or only <span class="tt">max()</span>:</p>
<div class="fragment"><div class="line"><span class="comment">// string, maximum 20 characters</span></div>
<div class="line">Expect::string()-&gt;max(20);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10047"></a>
Regular Expressions: pattern()</h2>
<p>Using <span class="tt">pattern()</span>, you can specify a regular expression which the <b>whole</b> input string must match (i.e. as if it were wrapped in characters <span class="tt">^</span> a <span class="tt">$</span>):</p>
<div class="fragment"><div class="line"><span class="comment">// just 9 digits</span></div>
<div class="line">Expect::string()-&gt;pattern(<span class="stringliteral">&#39;\d{9}&#39;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10048"></a>
Custom Assertions: assert()</h2>
<p>You can add any other restrictions using <span class="tt">assert(callable $fn)</span>.</p>
<div class="fragment"><div class="line">$countIsEven = fn($v) =&gt; count($v) % 2 === 0;</div>
<div class="line"> </div>
<div class="line">$schema = Expect::arrayOf(<span class="stringliteral">&#39;string&#39;</span>)</div>
<div class="line">    -&gt;assert($countIsEven); <span class="comment">// the count must be even</span></div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>]); <span class="comment">// OK</span></div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>]); <span class="comment">// ERROR: 3 is not even</span></div>
</div><!-- fragment --><p>Or</p>
<div class="fragment"><div class="line">Expect::string()-&gt;assert(<span class="stringliteral">&#39;is_file&#39;</span>); <span class="comment">// the file must exist</span></div>
</div><!-- fragment --><p>You can add your own description for each assertion. It will be part of the error message.</p>
<div class="fragment"><div class="line">$schema = Expect::arrayOf(<span class="stringliteral">&#39;string&#39;</span>)</div>
<div class="line">    -&gt;assert($countIsEven, <span class="stringliteral">&#39;Even items in array&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$processor-&gt;process($schema, [<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>]);</div>
<div class="line"><span class="comment">// Failed assertion &quot;Even items in array&quot; for item with value array.</span></div>
</div><!-- fragment --><p>The method can be called repeatedly to add multiple constraints. It can be intermixed with calls to <span class="tt">transform()</span> and <span class="tt">castTo()</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10049"></a>
Transformation: transform()</h2>
<p>Successfully validated data can be modified using a custom function:</p>
<div class="fragment"><div class="line"><span class="comment">// conversion to uppercase:</span></div>
<div class="line">Expect::string()-&gt;transform(fn(<span class="keywordtype">string</span> $s) =&gt; strtoupper($s));</div>
</div><!-- fragment --><p>The method can be called repeatedly to add multiple transformations. It can be intermixed with calls to <span class="tt">assert()</span> and <span class="tt">castTo()</span>. The operations will be executed in the order in which they are declared:</p>
<div class="fragment"><div class="line">Expect::type(<span class="stringliteral">&#39;string|int&#39;</span>)</div>
<div class="line">    -&gt;castTo(<span class="stringliteral">&#39;string&#39;</span>)</div>
<div class="line">    -&gt;assert(<span class="stringliteral">&#39;ctype_lower&#39;</span>, <span class="stringliteral">&#39;All characters must be lowercased&#39;</span>)</div>
<div class="line">    -&gt;transform(fn(<span class="keywordtype">string</span> $s) =&gt; strtoupper($s)); <span class="comment">// conversion to uppercase</span></div>
</div><!-- fragment --><p>The <span class="tt">transform()</span> method can both transform and validate the value simultaneously. This is often simpler and less redundant than chaining <span class="tt">transform()</span> and <span class="tt">assert()</span>. For this purpose, the function receives a <a href="https://api.nette.org/schema/master/Nette/Schema/Context.html">Nette\Schema\Context</a> object with an <span class="tt">addError()</span> method, which can be used to add information about validation issues:</p>
<div class="fragment"><div class="line">Expect::string()</div>
<div class="line">    -&gt;transform(<span class="keyword">function</span> (<span class="keywordtype">string</span> $s, <a class="code hl_namespace" href="namespace_nette.html">Nette</a>\Schema\Context $context) {</div>
<div class="line">        <span class="keywordflow">if</span> (!ctype_lower($s)) {</div>
<div class="line">            $context-&gt;addError(<span class="stringliteral">&#39;All characters must be lowercased&#39;</span>, <span class="stringliteral">&#39;my.case.error&#39;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> strtoupper($s);</div>
<div class="line">    });</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10050"></a>
Casting: castTo()</h2>
<p>Successfully validated data can be cast:</p>
<div class="fragment"><div class="line">Expect::scalar()-&gt;castTo(<span class="stringliteral">&#39;string&#39;</span>);</div>
</div><!-- fragment --><p>In addition to native PHP types, you can also cast to classes. It distinguishes whether it is a simple class without a constructor or a class with a constructor. If the class has no constructor, an instance of it is created and all elements of the structure are written to its properties:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Info</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> $processRefund;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> $refundAmount;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">Expect::structure([</div>
<div class="line">    <span class="stringliteral">&#39;processRefund&#39;</span> =&gt; Expect::bool(),</div>
<div class="line">    <span class="stringliteral">&#39;refundAmount&#39;</span> =&gt; Expect::int(),</div>
<div class="line">])-&gt;castTo(Info::class);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// creates &#39;$obj = new Info&#39; and writes to $obj-&gt;processRefund and $obj-&gt;refundAmount</span></div>
</div><!-- fragment --><p>If the class has a constructor, the elements of the structure are passed as named parameters to the constructor:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Info</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> __construct(</div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">bool</span> $processRefund,</div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">int</span> $refundAmount,</div>
<div class="line">    ) {</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// creates $obj = new Info(processRefund: ..., refundAmount: ...)</span></div>
</div><!-- fragment --><p>Casting combined with a scalar parameter creates an object and passes the value as the sole parameter to the constructor:</p>
<div class="fragment"><div class="line">Expect::string()-&gt;castTo(DateTime::class);</div>
<div class="line"><span class="comment">// creates new DateTime(...)</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10051"></a>
Normalization: before()</h2>
<p>Prior to the validation itself, the data can be normalized using the method <span class="tt">before()</span>. As an example, let's have an element that must be an array of strings (eg &lsquo;['a&rsquo;, 'b', 'c']<span class="tt">), but receives input in the form of a string </span>a b c`:</p>
<div class="fragment"><div class="line">$explode = fn($v) =&gt; explode(<span class="charliteral">&#39; &#39;</span>, $v);</div>
<div class="line"> </div>
<div class="line">$schema = Expect::arrayOf(<span class="stringliteral">&#39;string&#39;</span>)</div>
<div class="line">    -&gt;before($explode);</div>
<div class="line"> </div>
<div class="line">$normalized = $processor-&gt;process($schema, <span class="stringliteral">&#39;a b c&#39;</span>);</div>
<div class="line"><span class="comment">// OK, returns [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10052"></a>
Mapping to Objects: from()</h2>
<p>You can generate structure schema from the class. Example:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Config</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> $name;</div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_variable" href="resources_2views_2livewire_2pages_2auth_2register_8blade_8php.html#a99f6264ab0c9eac3199f38350ea0703d">$password</a>;</div>
<div class="line">    <span class="keyword">public</span> $admin = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">$schema = Expect::from(<span class="keyword">new</span> Config);</div>
<div class="line"> </div>
<div class="line">$data = [</div>
<div class="line">    <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;jeff&#39;</span>,</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">$normalized = $processor-&gt;process($schema, $data);</div>
<div class="line"><span class="comment">// $normalized instanceof Config</span></div>
<div class="line"><span class="comment">// $normalized = {&#39;name&#39; =&gt; &#39;jeff&#39;, &#39;password&#39; =&gt; null, &#39;admin&#39; =&gt; false}</span></div>
<div class="ttc" id="aresources_2views_2livewire_2pages_2auth_2register_8blade_8php_html_a99f6264ab0c9eac3199f38350ea0703d"><div class="ttname"><a href="resources_2views_2livewire_2pages_2auth_2register_8blade_8php.html#a99f6264ab0c9eac3199f38350ea0703d">$password</a></div><div class="ttdeci">string $password</div><div class="ttdef"><b>Definition</b> register.blade.php:15</div></div>
</div><!-- fragment --><p>If you are using PHP 7.4 or higher, you can use native types:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Config</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> $name;</div>
<div class="line">    <span class="keyword">public</span> ?<span class="keywordtype">string</span> <a class="code hl_variable" href="resources_2views_2livewire_2pages_2auth_2register_8blade_8php.html#a99f6264ab0c9eac3199f38350ea0703d">$password</a>;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> $admin = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">$schema = Expect::from(<span class="keyword">new</span> Config);</div>
</div><!-- fragment --><p>Anonymous classes are also supported:</p>
<div class="fragment"><div class="line">$schema = Expect::from(<span class="keyword">new</span> <span class="keyword">class</span> {</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> $name;</div>
<div class="line">    <span class="keyword">public</span> ?<span class="keywordtype">string</span> <a class="code hl_variable" href="resources_2views_2livewire_2pages_2auth_2register_8blade_8php.html#a99f6264ab0c9eac3199f38350ea0703d">$password</a>;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> $admin = <span class="keyword">false</span>;</div>
<div class="line">});</div>
</div><!-- fragment --><p>Because the information obtained from the class definition may not be sufficient, you can add a custom schema for the elements with the second parameter:</p>
<div class="fragment"><div class="line">$schema = Expect::from(<span class="keyword">new</span> Config, [</div>
<div class="line">    <span class="stringliteral">&#39;name&#39;</span> =&gt; Expect::string()-&gt;pattern(<span class="stringliteral">&#39;\w:.*&#39;</span>),</div>
<div class="line">]);</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c5da75fdc1d6c57999112ed830c87a3c.html">vendor</a></li><li class="navelem"><a href="dir_c399e17b82f8c3af17185b1d71fc9da4.html">nette</a></li><li class="navelem"><a href="dir_5baba132c04abf24a60cd5e36663db57.html">schema</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
