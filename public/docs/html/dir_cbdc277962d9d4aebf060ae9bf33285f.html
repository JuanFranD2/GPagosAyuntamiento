<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPagosAyuntHin: C:/xampp/htdocs/GPagosAyuntamiento/vendor/myclabs/deep-copy Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPagosAyuntHin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_cbdc277962d9d4aebf060ae9bf33285f.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">deep-copy Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:src" id="r_src"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_d3d379b2264d5029e52926369daeafab.html">src</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md9997"></a>
DeepCopy</h1>
<p><a class="el" href="namespace_deep_copy.html">DeepCopy</a> helps you create deep copies (clones) of your objects. It is designed to handle cycles in the association graph.</p>
<p><a href="https://packagist.org/packages/myclabs/deep-copy"><img src="https://poser.pugx.org/myclabs/deep-copy/downloads.svg" alt="Total Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/myclabs/DeepCopy/actions/workflows/ci.yaml"><img src="https://github.com/myclabs/DeepCopy/actions/workflows/ci.yaml/badge.svg?branch=1.x" alt="Integrate" style="pointer-events: none;" class="inline"/></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md9998"></a>
Table of Contents</h1>
<ol type="1">
<li>How</li>
</ol>
<ol type="1">
<li>Why<ol type="a">
<li>Using simply `clone`</li>
</ol>
<ol type="a">
<li>Overriding `__clone()`</li>
</ol>
<ol type="a">
<li>With `DeepCopy`</li>
</ol>
</li>
</ol>
<ol type="1">
<li>How it works</li>
</ol>
<ol type="1">
<li>Going further<ol type="a">
<li>Matchers<ol type="i">
<li>Property name</li>
</ol>
<ol type="i">
<li>Specific property</li>
</ol>
<ol type="i">
<li>Type</li>
</ol>
</li>
</ol>
<ol type="a">
<li>Filters<ol type="i">
<li>`SetNullFilter`</li>
</ol>
<ol type="i">
<li>`KeepFilter`</li>
</ol>
<ol type="i">
<li>`DoctrineCollectionFilter`</li>
</ol>
<ol type="i">
<li>`DoctrineEmptyCollectionFilter`</li>
</ol>
<ol type="i">
<li>`DoctrineProxyFilter`</li>
</ol>
<ol type="i">
<li>`ReplaceFilter`</li>
</ol>
<ol type="i">
<li>`ShallowCopyFilter`</li>
</ol>
</li>
</ol>
</li>
</ol>
<ol type="1">
<li>Edge cases</li>
</ol>
<ol type="1">
<li><a class="el" href="C:/xampp/htdocs/GPagosAyuntamiento/vendor/livewire/livewire/README.md#contributing">Contributing</a><ol type="a">
<li>Tests</li>
</ol>
</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md9999"></a>
How?</h1>
<p>Install with <a class="el" href="namespace_composer.html">Composer</a>:</p>
<div class="fragment"><div class="line">composer require myclabs/deep-copy</div>
</div><!-- fragment --><p>Use it:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$myCopy = $copier-&gt;copy($myObject);</div>
<div class="ttc" id="aclass_deep_copy_1_1_deep_copy_html"><div class="ttname"><a href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a></div><div class="ttdef"><b>Definition</b> DeepCopy.php:29</div></div>
<div class="ttc" id="anamespace_deep_copy_html"><div class="ttname"><a href="namespace_deep_copy.html">DeepCopy</a></div><div class="ttdef"><b>Definition</b> deep_copy.php:3</div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md10000"></a>
Why?</h1>
<ul>
<li>How do you create copies of your objects?</li>
</ul>
<div class="fragment"><div class="line">$myCopy = clone $myObject;</div>
</div><!-- fragment --><ul>
<li>How do you create <b>deep</b> copies of your objects (i.e. copying also all the objects referenced in the properties)?</li>
</ul>
<p>You use <a href="http://www.php.net/manual/en/language.oop5.cloning.php#object.clone"><span class="tt">__clone()</span></a> and implement the behavior yourself.</p>
<ul>
<li>But how do you handle <b>cycles</b> in the association graph?</li>
</ul>
<p>Now you're in for a big mess :(</p>
<p><img src="doc/graph.png" alt="association graph" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10001"></a>
Using simply <span class="tt">clone</span></h2>
<p><img src="doc/clone.png" alt="Using clone" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10002"></a>
Overriding <span class="tt">__clone()</span></h2>
<p><img src="doc/deep-clone.png" alt="Overriding __clone" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10003"></a>
With <span class="tt">DeepCopy</span></h2>
<p><img src="doc/deep-copy.png" alt="With DeepCopy" class="inline"/></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md10004"></a>
How it works</h1>
<p><a class="el" href="namespace_deep_copy.html">DeepCopy</a> recursively traverses all the object's properties and clones them. To avoid cloning the same object twice it keeps a hash map of all instances and thus preserves the object graph.</p>
<p>To use it:</p>
<div class="fragment"><div class="line">use <span class="keyword">function</span> DeepCopy\deep_copy;</div>
<div class="line"> </div>
<div class="line">$copy = deep_copy($var);</div>
</div><!-- fragment --><p>Alternatively, you can create your own <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a></span> instance to configure it differently for example:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($var);</div>
</div><!-- fragment --><p>You may want to roll your own deep copy function:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>Acme;</div>
<div class="line"> </div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">function</span> deep_copy($var)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> $copier = <span class="keyword">null</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">null</span> === $copier) {</div>
<div class="line">        $copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>(<span class="keyword">true</span>);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $copier-&gt;<a class="code hl_function" href="class_deep_copy_1_1_deep_copy.html#a07abdb9b8e783676fd376c8877ada3dc">copy</a>($var);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_deep_copy_1_1_deep_copy_html_a07abdb9b8e783676fd376c8877ada3dc"><div class="ttname"><a href="class_deep_copy_1_1_deep_copy.html#a07abdb9b8e783676fd376c8877ada3dc">DeepCopy\DeepCopy\copy</a></div><div class="ttdeci">copy($object)</div><div class="ttdef"><b>Definition</b> DeepCopy.php:94</div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md10005"></a>
Going further</h1>
<p>You can add filters to customize the copy process.</p>
<p>The method to add a filter is <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\DeepCopy::addFilter($filter, $matcher)</span>, with <span class="tt">$filter</span> implementing <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\Filter\Filter</span> and <span class="tt">$matcher</span> implementing <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\Matcher\Matcher</span>.</p>
<p>We provide some generic filters and matchers.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10006"></a>
Matchers</h2>
<ul>
<li><span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\Matcher</span> applies on a object attribute.</li>
<li><span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\TypeMatcher</span> applies on any element found in graph, including array elements.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10007"></a>
Property name</h3>
<p>The <span class="tt">PropertyNameMatcher</span> will match a property by its name:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_name_matcher.html">DeepCopy\Matcher\PropertyNameMatcher</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Will apply a filter to any property of any objects named &quot;id&quot;</span></div>
<div class="line">$matcher = <span class="keyword">new</span> PropertyNameMatcher(<span class="stringliteral">&#39;id&#39;</span>);</div>
<div class="ttc" id="aclass_deep_copy_1_1_matcher_1_1_property_name_matcher_html"><div class="ttname"><a href="class_deep_copy_1_1_matcher_1_1_property_name_matcher.html">DeepCopy\Matcher\PropertyNameMatcher</a></div><div class="ttdef"><b>Definition</b> PropertyNameMatcher.php:9</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10008"></a>
Specific property</h3>
<p>The <span class="tt">PropertyMatcher</span> will match a specific property of a specific class:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_matcher.html">DeepCopy\Matcher\PropertyMatcher</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Will apply a filter to the property &quot;id&quot; of any objects of the class &quot;MyClass&quot;</span></div>
<div class="line">$matcher = <span class="keyword">new</span> PropertyMatcher(<span class="stringliteral">&#39;MyClass&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>);</div>
<div class="ttc" id="aclass_deep_copy_1_1_matcher_1_1_property_matcher_html"><div class="ttname"><a href="class_deep_copy_1_1_matcher_1_1_property_matcher.html">DeepCopy\Matcher\PropertyMatcher</a></div><div class="ttdef"><b>Definition</b> PropertyMatcher.php:9</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10009"></a>
Type</h3>
<p>The <span class="tt">TypeMatcher</span> will match any element by its type (instance of a class or any value that could be parameter of <a href="http://php.net/manual/en/function.gettype.php">gettype()</a> function):</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_type_matcher_1_1_type_matcher.html">DeepCopy\TypeMatcher\TypeMatcher</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Will apply a filter to any object that is an instance of Doctrine\Common\Collections\Collection</span></div>
<div class="line">$matcher = <span class="keyword">new</span> TypeMatcher(<span class="stringliteral">&#39;Doctrine\Common\Collections\Collection&#39;</span>);</div>
<div class="ttc" id="aclass_deep_copy_1_1_type_matcher_1_1_type_matcher_html"><div class="ttname"><a href="class_deep_copy_1_1_type_matcher_1_1_type_matcher.html">DeepCopy\TypeMatcher\TypeMatcher</a></div><div class="ttdef"><b>Definition</b> TypeMatcher.php:6</div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10010"></a>
Filters</h2>
<ul>
<li><span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\Filter</span> applies a transformation to the object attribute matched by <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\Matcher</span></li>
<li><span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\TypeFilter</span> applies a transformation to any element matched by <span class="tt"><a class="el" href="namespace_deep_copy.html">DeepCopy</a>\TypeMatcher</span></li>
</ul>
<p>By design, matching a filter will stop the chain of filters (i.e. the next ones will not be applied). Using the (`ChainableFilter`) won't stop the chain of filters.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10011"></a>
<span class="tt">SetNullFilter</span> (filter)</h3>
<p>Let's say for example that you are copying a database record (or a Doctrine entity), so you want the copy not to have any ID:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_set_null_filter.html">DeepCopy\Filter\SetNullFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_name_matcher.html">DeepCopy\Matcher\PropertyNameMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$object = MyClass::load(123);</div>
<div class="line">echo $object-&gt;id; <span class="comment">// 123</span></div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> SetNullFilter(), <span class="keyword">new</span> PropertyNameMatcher(<span class="stringliteral">&#39;id&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"> </div>
<div class="line">echo $copy-&gt;id; <span class="comment">// null</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_set_null_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_set_null_filter.html">DeepCopy\Filter\SetNullFilter</a></div><div class="ttdef"><b>Definition</b> SetNullFilter.php:11</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10012"></a>
<span class="tt">KeepFilter</span> (filter)</h3>
<p>If you want a property to remain untouched (for example, an association to an object):</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_keep_filter.html">DeepCopy\Filter\KeepFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_matcher.html">DeepCopy\Matcher\PropertyMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> KeepFilter(), <span class="keyword">new</span> PropertyMatcher(<span class="stringliteral">&#39;MyClass&#39;</span>, <span class="stringliteral">&#39;category&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"><span class="comment">// $copy-&gt;category has not been touched</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_keep_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_keep_filter.html">DeepCopy\Filter\KeepFilter</a></div><div class="ttdef"><b>Definition</b> KeepFilter.php:6</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10013"></a>
<span class="tt">ChainableFilter</span> (filter)</h3>
<p>If you use cloning on proxy classes, you might want to apply two filters for:</p><ol type="1">
<li>loading the data</li>
<li>applying a transformation</li>
</ol>
<p>You can use the <span class="tt">ChainableFilter</span> as a decorator of the proxy loader filter, which won't stop the chain of filters (i.e. the next ones may be applied).</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_chainable_filter.html">DeepCopy\Filter\ChainableFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_proxy_filter.html">DeepCopy\Filter\Doctrine\DoctrineProxyFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_set_null_filter.html">DeepCopy\Filter\SetNullFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_doctrine_1_1_doctrine_proxy_matcher.html">DeepCopy\Matcher\Doctrine\DoctrineProxyMatcher</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_name_matcher.html">DeepCopy\Matcher\PropertyNameMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> ChainableFilter(<span class="keyword">new</span> DoctrineProxyFilter()), <span class="keyword">new</span> DoctrineProxyMatcher());</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> SetNullFilter(), <span class="keyword">new</span> PropertyNameMatcher(<span class="stringliteral">&#39;id&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"> </div>
<div class="line">echo $copy-&gt;id; <span class="comment">// null</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_chainable_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_chainable_filter.html">DeepCopy\Filter\ChainableFilter</a></div><div class="ttdef"><b>Definition</b> ChainableFilter.php:9</div></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_proxy_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_proxy_filter.html">DeepCopy\Filter\Doctrine\DoctrineProxyFilter</a></div><div class="ttdef"><b>Definition</b> DoctrineProxyFilter.php:11</div></div>
<div class="ttc" id="aclass_deep_copy_1_1_matcher_1_1_doctrine_1_1_doctrine_proxy_matcher_html"><div class="ttname"><a href="class_deep_copy_1_1_matcher_1_1_doctrine_1_1_doctrine_proxy_matcher.html">DeepCopy\Matcher\Doctrine\DoctrineProxyMatcher</a></div><div class="ttdef"><b>Definition</b> DoctrineProxyMatcher.php:12</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10014"></a>
<span class="tt">DoctrineCollectionFilter</span> (filter)</h3>
<p>If you use Doctrine and want to copy an entity, you will need to use the <span class="tt">DoctrineCollectionFilter</span>:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_collection_filter.html">DeepCopy\Filter\Doctrine\DoctrineCollectionFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_type_matcher.html">DeepCopy\Matcher\PropertyTypeMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> DoctrineCollectionFilter(), <span class="keyword">new</span> PropertyTypeMatcher(<span class="stringliteral">&#39;Doctrine\Common\Collections\Collection&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_collection_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_collection_filter.html">DeepCopy\Filter\Doctrine\DoctrineCollectionFilter</a></div><div class="ttdef"><b>Definition</b> DoctrineCollectionFilter.php:12</div></div>
<div class="ttc" id="aclass_deep_copy_1_1_matcher_1_1_property_type_matcher_html"><div class="ttname"><a href="class_deep_copy_1_1_matcher_1_1_property_type_matcher.html">DeepCopy\Matcher\PropertyTypeMatcher</a></div><div class="ttdef"><b>Definition</b> PropertyTypeMatcher.php:17</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10015"></a>
<span class="tt">DoctrineEmptyCollectionFilter</span> (filter)</h3>
<p>If you use Doctrine and want to copy an entity who contains a <span class="tt">Collection</span> that you want to be reset, you can use the <span class="tt">DoctrineEmptyCollectionFilter</span></p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_empty_collection_filter.html">DeepCopy\Filter\Doctrine\DoctrineEmptyCollectionFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_matcher.html">DeepCopy\Matcher\PropertyMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> DoctrineEmptyCollectionFilter(), <span class="keyword">new</span> PropertyMatcher(<span class="stringliteral">&#39;MyClass&#39;</span>, <span class="stringliteral">&#39;myProperty&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $copy-&gt;myProperty will return an empty collection</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_empty_collection_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_empty_collection_filter.html">DeepCopy\Filter\Doctrine\DoctrineEmptyCollectionFilter</a></div><div class="ttdef"><b>Definition</b> DoctrineEmptyCollectionFilter.php:13</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10016"></a>
<span class="tt">DoctrineProxyFilter</span> (filter)</h3>
<p>If you use Doctrine and use cloning on lazy loaded entities, you might encounter errors mentioning missing fields on a Doctrine proxy class (...\__CG__\Proxy). You can use the <span class="tt">DoctrineProxyFilter</span> to load the actual entity behind the Doctrine proxy class. <b>Make sure, though, to put this as one of your very first filters in the filter chain so that the entity is loaded before other filters are applied!</b> We recommend to decorate the <span class="tt">DoctrineProxyFilter</span> with the <span class="tt">ChainableFilter</span> to allow applying other filters to the cloned lazy loaded entities.</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_doctrine_1_1_doctrine_proxy_filter.html">DeepCopy\Filter\Doctrine\DoctrineProxyFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_doctrine_1_1_doctrine_proxy_matcher.html">DeepCopy\Matcher\Doctrine\DoctrineProxyMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> ChainableFilter(<span class="keyword">new</span> DoctrineProxyFilter()), <span class="keyword">new</span> DoctrineProxyMatcher());</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $copy should now contain a clone of all entities, including those that were not yet fully loaded.</span></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md10017"></a>
<span class="tt">ReplaceFilter</span> (type filter)</h3>
<ol type="1">
<li>If you want to replace the value of a property:</li>
</ol>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_filter_1_1_replace_filter.html">DeepCopy\Filter\ReplaceFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_matcher_1_1_property_matcher.html">DeepCopy\Matcher\PropertyMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$callback = <span class="keyword">function</span> ($currentValue) {</div>
<div class="line">  <span class="keywordflow">return</span> $currentValue . <span class="stringliteral">&#39; (copy)&#39;</span></div>
<div class="line">};</div>
<div class="line">$copier-&gt;addFilter(<span class="keyword">new</span> ReplaceFilter($callback), <span class="keyword">new</span> PropertyMatcher(<span class="stringliteral">&#39;MyClass&#39;</span>, <span class="stringliteral">&#39;title&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy($object);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $copy-&gt;title will contain the data returned by the callback, e.g. &#39;The title (copy)&#39;</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_filter_1_1_replace_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_filter_1_1_replace_filter.html">DeepCopy\Filter\ReplaceFilter</a></div><div class="ttdef"><b>Definition</b> ReplaceFilter.php:11</div></div>
</div><!-- fragment --><ol type="1">
<li>If you want to replace whole element:</li>
</ol>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_type_filter_1_1_replace_filter.html">DeepCopy\TypeFilter\ReplaceFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_type_matcher_1_1_type_matcher.html">DeepCopy\TypeMatcher\TypeMatcher</a>;</div>
<div class="line"> </div>
<div class="line">$copier = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$callback = <span class="keyword">function</span> (MyClass $myClass) {</div>
<div class="line">  <span class="keywordflow">return</span> get_class($myClass);</div>
<div class="line">};</div>
<div class="line">$copier-&gt;addTypeFilter(<span class="keyword">new</span> ReplaceFilter($callback), <span class="keyword">new</span> TypeMatcher(<span class="stringliteral">&#39;MyClass&#39;</span>));</div>
<div class="line"> </div>
<div class="line">$copy = $copier-&gt;copy([<span class="keyword">new</span> MyClass, <span class="stringliteral">&#39;some string&#39;</span>, <span class="keyword">new</span> MyClass]);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $copy will contain [&#39;MyClass&#39;, &#39;some string&#39;, &#39;MyClass&#39;]</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_type_filter_1_1_replace_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_type_filter_1_1_replace_filter.html">DeepCopy\TypeFilter\ReplaceFilter</a></div><div class="ttdef"><b>Definition</b> ReplaceFilter.php:9</div></div>
</div><!-- fragment --><p>The <span class="tt">$callback</span> parameter of the <span class="tt">ReplaceFilter</span> constructor accepts any PHP callable.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10018"></a>
<span class="tt">ShallowCopyFilter</span> (type filter)</h3>
<p>Stop <em><a class="el" href="namespace_deep_copy.html">DeepCopy</a></em> from recursively copying element, using standard <span class="tt">clone</span> instead:</p>
<div class="fragment"><div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_deep_copy.html">DeepCopy\DeepCopy</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_type_filter_1_1_shallow_copy_filter.html">DeepCopy\TypeFilter\ShallowCopyFilter</a>;</div>
<div class="line">use <a class="code hl_class" href="class_deep_copy_1_1_type_matcher_1_1_type_matcher.html">DeepCopy\TypeMatcher\TypeMatcher</a>;</div>
<div class="line">use <a class="code hl_namespace" href="namespace_mockery.html">Mockery</a> as m;</div>
<div class="line"> </div>
<div class="line">$this-&gt;deepCopy = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_deep_copy.html">DeepCopy</a>();</div>
<div class="line">$this-&gt;deepCopy-&gt;addTypeFilter(</div>
<div class="line">    <span class="keyword">new</span> ShallowCopyFilter,</div>
<div class="line">    <span class="keyword">new</span> TypeMatcher(m\MockInterface::class)</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$myServiceWithMocks = <span class="keyword">new</span> MyService(m::mock(MyDependency1::class), m::mock(MyDependency2::class));</div>
<div class="line"><span class="comment">// All mocks will be just cloned, not deep copied</span></div>
<div class="ttc" id="aclass_deep_copy_1_1_type_filter_1_1_shallow_copy_filter_html"><div class="ttname"><a href="class_deep_copy_1_1_type_filter_1_1_shallow_copy_filter.html">DeepCopy\TypeFilter\ShallowCopyFilter</a></div><div class="ttdef"><b>Definition</b> ShallowCopyFilter.php:9</div></div>
<div class="ttc" id="anamespace_mockery_html"><div class="ttname"><a href="namespace_mockery.html">Mockery</a></div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md10019"></a>
Edge cases</h1>
<p>The following structures cannot be deep-copied with PHP Reflection. As a result they are shallow cloned and filters are not applied. There is two ways for you to handle them:</p>
<ul>
<li>Implement your own <span class="tt">__clone()</span> method</li>
<li>Use a filter with a type matcher</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md10020"></a>
Contributing</h1>
<p><a class="el" href="namespace_deep_copy.html">DeepCopy</a> is distributed under the MIT license.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10021"></a>
Tests</h2>
<p>Running the tests is simple:</p>
<div class="fragment"><div class="line">vendor/bin/phpunit</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md10022"></a>
Support</h2>
<p>Get professional support via <a href="https://tidelift.com/subscription/pkg/packagist-myclabs-deep-copy?utm_source=packagist-myclabs-deep-copy&amp;utm_medium=referral&amp;utm_campaign=readme">the Tidelift Subscription</a>. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c5da75fdc1d6c57999112ed830c87a3c.html">vendor</a></li><li class="navelem"><a href="dir_21171242177687d01c667be33115dc2b.html">myclabs</a></li><li class="navelem"><a href="dir_cbdc277962d9d4aebf060ae9bf33285f.html">deep-copy</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
