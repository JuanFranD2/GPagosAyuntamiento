<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPagosAyuntHin: C:/xampp/htdocs/GPagosAyuntamiento/vendor/ta-tikoma/phpunit-architecture-test Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPagosAyuntHin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_afe282f26e6a1e24fac53fdab0de1cda.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">phpunit-architecture-test Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:src" id="r_src"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_fa0792fe75ebce70937feb9a5bb75ca5.html">src</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11464"></a>
PHPUnit Application Architecture Test</h1>
<p><b>Idea</b>: write architecture tests as well as feature and unit tests. Protect your architecture code style!</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11465"></a>
Example</h1>
<p>Don't use repositories in controllers use only in services classes. Take three layers "repositories", "services", "controllers" and add asserts on dependencies. </p><div class="fragment"><div class="line">$controllers  = $this-&gt;layer()-&gt;leaveByNameStart(<span class="stringliteral">&#39;App\\Controllers&#39;</span>);</div>
<div class="line">$services     = $this-&gt;layer()-&gt;leaveByNameStart(<span class="stringliteral">&#39;App\\Services&#39;</span>);</div>
<div class="line">$repositories = $this-&gt;layer()-&gt;leaveByNameStart(<span class="stringliteral">&#39;App\\Repositories&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$this-&gt;assertDoesNotDependOn($controllers, $repositories);</div>
<div class="line">$this-&gt;assertDependOn($controllers, $services);</div>
<div class="line">$this-&gt;assertDependOn($services, $repositories);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md11466"></a>
Installation</h1>
<h3 class="doxsection"><a class="anchor" id="autotoc_md11467"></a>
Install via composer</h3>
<div class="fragment"><div class="line">composer require --dev ta-tikoma/phpunit-architecture-test</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md11468"></a>
Add trait to Test class</h3>
<div class="fragment"><div class="line"><span class="keyword">abstract</span> <span class="keyword">class </span>TestCase <span class="keyword">extends</span> BaseTestCase</div>
<div class="line">{</div>
<div class="line">    use ArchitectureAsserts;</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md11469"></a>
Use</h1>
<ul>
<li>Create test</li>
<li>Make layers of application</li>
<li>Add asserts</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">function</span> test_make_layer_from_namespace()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="index_8php.html#adfb117f244076aa9bc269269f7e57403">$app</a> = $this-&gt;layer()-&gt;leaveByNameStart(<span class="stringliteral">&#39;PHPUnit\\Architecture&#39;</span>);</div>
<div class="line">    $tests = $this-&gt;layer()-&gt;leaveByNameStart(<span class="stringliteral">&#39;tests&#39;</span>);</div>
<div class="line"> </div>
<div class="line">    $this-&gt;assertDoesNotDependOn(<a class="code hl_variable" href="index_8php.html#adfb117f244076aa9bc269269f7e57403">$app</a>, $tests);</div>
<div class="line">    $this-&gt;assertDependOn($tests, <a class="code hl_variable" href="index_8php.html#adfb117f244076aa9bc269269f7e57403">$app</a>);</div>
<div class="line">}</div>
<div class="ttc" id="aindex_8php_html_adfb117f244076aa9bc269269f7e57403"><div class="ttname"><a href="index_8php.html#adfb117f244076aa9bc269269f7e57403">$app</a></div><div class="ttdeci">$app</div><div class="ttdef"><b>Definition</b> index.php:18</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md11470"></a>
Run</h3>
<div class="fragment"><div class="line">./vendor/bin/phpunit</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md11471"></a>
Test files structure</h1>
<ul>
<li>tests<ul>
<li>Architecture<ul>
<li>SomeTest.php</li>
</ul>
</li>
<li>Feature</li>
<li>Unit</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11472"></a>
How to build Layer</h1>
<ul>
<li><span class="tt">$this-&gt;layer()</span> take access to layer with all objects and filter for create your layer:<ul>
<li>leave objects in layer only:<ul>
<li><span class="tt">-&gt;leave($closure)</span> by closure</li>
<li><span class="tt">-&gt;leaveByPathStart($path)</span> by object path start</li>
<li><span class="tt">-&gt;leaveByNameStart($name)</span> by object name start</li>
<li><span class="tt">-&gt;leaveByNameRegex($name)</span> by object name regex</li>
<li><span class="tt">-&gt;leaveByType($name)</span> by object type</li>
</ul>
</li>
<li>remove objects from layer:<ul>
<li><span class="tt">-&gt;exclude($closure)</span> by closure</li>
<li><span class="tt">-&gt;excludeByPathStart($path)</span> by object path start</li>
<li><span class="tt">-&gt;excludeByNameStart($name)</span> by object name start</li>
<li><span class="tt">-&gt;excludeByNameRegex($name)</span> by object name regex</li>
<li><span class="tt">-&gt;excludeByType($name)</span> by object type</li>
</ul>
</li>
</ul>
</li>
<li>you can create multiple layers with split:<ul>
<li><span class="tt">-&gt;split($closure)</span> by closure</li>
<li><span class="tt">-&gt;splitByNameRegex($closure)</span> by object name</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11473"></a>
Asserts</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md11474"></a>
Dependencies</h2>
<p><b>Example:</b> Controllers don't use Repositories only via Services</p>
<ul>
<li><span class="tt">assertDependOn($A, $B)</span> Layer A must contains dependencies by layer B.</li>
<li><span class="tt">assertDoesNotDependOn($A, $B)</span> Layer A (or layers in array A) must not contains dependencies by layer B (or layers in array B).</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md11475"></a>
Methods</h2>
<ul>
<li><span class="tt">assertIncomingsFrom($A, $B)</span> Layer A must contains arguments with types from Layer B</li>
<li><span class="tt">assertIncomingsNotFrom($A, $B)</span> Layer A must not contains arguments with types from Layer B</li>
<li><span class="tt">assertOutgoingFrom($A, $B)</span> Layer A must contains methods return types from Layer B</li>
<li><span class="tt">assertOutgoingNotFrom($A, $B)</span> Layer A must not contains methods return types from Layer B</li>
<li><span class="tt">assertMethodSizeLessThan($A, $SIZE)</span> Layer A must not contains methods with size less than SIZE</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md11476"></a>
Properties</h2>
<ul>
<li><span class="tt">assertHasNotPublicProperties($A)</span> Objects in Layer A must not contains public properties</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md11477"></a>
Essence</h2>
<p>You can use <span class="tt">$layer-&gt;essence($path)</span> method for collect data from layer. For example get visibility of all properties in layer: &lsquo;$visibilities = $layer-&gt;essence('properties.*.visibility&rsquo;);` .</p>
<ul>
<li><span class="tt">assertEach($list, $check, $message)</span> - each item of list must passed tested by $check-function</li>
<li><span class="tt">assertNotOne($list, $check, $message)</span> - not one item of list must not passed tested by $check-function</li>
<li><span class="tt">assertAny($list, $check, $message)</span> - one or more item of list must not passed tested by $check-function</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11478"></a>
Alternatives</h1>
<ul>
<li><a href="https://github.com/qossmic/deptrac">Deptrac</a></li>
<li><a href="https://github.com/carlosas/phpat">PHP Architecture Tester</a></li>
<li><a href="https://github.com/j6s/phparch">PHPArch</a></li>
<li><a href="https://github.com/phparkitect/arkitect">Arkitect</a></li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md11479"></a>
Advantages</h3>
<ul>
<li>Dynamic creation of layers by regular expression (not need declare each module)</li>
<li>Run along with the rest of tests from <a href="https://github.com/sebastianbergmann/phpunit">phpunit</a></li>
<li>Asserts to method arguments and return types (for check dependent injection)</li>
<li>Asserts to properties visibility </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c5da75fdc1d6c57999112ed830c87a3c.html">vendor</a></li><li class="navelem"><a href="dir_9d661f0c547f4d956accf20fd44d7077.html">ta-tikoma</a></li><li class="navelem"><a href="dir_afe282f26e6a1e24fac53fdab0de1cda.html">phpunit-architecture-test</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
