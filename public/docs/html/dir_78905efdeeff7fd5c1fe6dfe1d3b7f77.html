<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPagosAyuntHin: C:/xampp/htdocs/GPagosAyuntamiento/vendor/brianium/paratest Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPagosAyuntHin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_78905efdeeff7fd5c1fe6dfe1d3b7f77.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">paratest Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:bin" id="r_bin"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_acad1bb53a77c9e1fec2f5d658b81235.html">bin</a></td></tr>
<tr class="memitem:src" id="r_src"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_549b8b3db6321b01dd4410e5e3d49934.html">src</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p><a href="https://packagist.org/packages/brianium/paratest"><img src="https://img.shields.io/packagist/v/brianium/paratest.svg" alt="Latest Stable Version" style="pointer-events: none;" class="inline"/></a> <a href="https://packagist.org/packages/brianium/paratest"><img src="https://img.shields.io/packagist/dt/brianium/paratest.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/paratestphp/paratest/actions"><img src="https://github.com/paratestphp/paratest/workflows/CI/badge.svg" alt="Integrate" style="pointer-events: none;" class="inline"/></a> <a href="https://dashboard.stryker-mutator.io/reports/github.com/paratestphp/paratest/7.x"><img src="https://img.shields.io/endpoint?style=flat&amp;url=https%3A%2F%2Fbadge-api.stryker-mutator.io%2Fgithub.com%2Fparatestphp%2Fparatest%2F7.x" alt="Infection MSI" class="inline"/></a></p>
<p>The objective of <a class="el" href="namespace_para_test.html">ParaTest</a> is to support parallel testing in <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a>. Provided you have well-written <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> tests, you can drop <span class="tt">paratest</span> in your project and start using it with no additional bootstrap or configurations!</p>
<p>Benefits:</p>
<ul>
<li>Zero configuration. After the installation, run with <span class="tt">vendor/bin/paratest</span> to parallelize by TestCase or <span class="tt">vendor/bin/paratest --functional</span> to parallelize by Test. That's it!</li>
<li>Code Coverage report combining. Run your tests in N parallel processes and all the code coverage output will be combined into one report.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8685"></a>
Installation</h1>
<p>To install with composer run the following command: </p><pre class="fragment">composer require --dev brianium/paratest
</pre><h1 class="doxsection"><a class="anchor" id="autotoc_md8686"></a>
Versions</h1>
<p>Only the latest version of <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> is supported, and thus only the latest version of <a class="el" href="namespace_para_test.html">ParaTest</a> is actively maintained.</p>
<p>This is because of the following reasons:</p>
<ol type="1">
<li>To reduce bugs, code duplication and incompatibilities with <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a>, from version 5 <a class="el" href="namespace_para_test.html">ParaTest</a> heavily relies on <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> <span class="tt">@internal</span> classes</li>
</ol>
<ol type="1">
<li>The fast pace both PHP and <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> have taken recently adds too much maintenance burden, which we can only afford for the latest versions to stay up-to-date</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8687"></a>
Usage</h1>
<p>After installation, the binary can be found at <span class="tt">vendor/bin/paratest</span>. Run it with <span class="tt">--help</span> option to see a complete list of the available options.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8688"></a>
Test token</h2>
<p>The <span class="tt">TEST_TOKEN</span> environment variable is guaranteed to have a value that is different from every other currently running test. This is useful to e.g. use a different database for each test:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (getenv(<span class="stringliteral">&#39;TEST_TOKEN&#39;</span>) !== <span class="keyword">false</span>) {  <span class="comment">// Using ParaTest</span></div>
<div class="line">    $dbname = <span class="stringliteral">&#39;testdb_&#39;</span> . getenv(<span class="stringliteral">&#39;TEST_TOKEN&#39;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    $dbname = <span class="stringliteral">&#39;testdb&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>A <span class="tt">UNIQUE_TEST_TOKEN</span> environment variable is also available and guaranteed to have a value that is unique both per run and per process.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8689"></a>
Code coverage</h2>
<p>The cache is always warmed up by <a class="el" href="namespace_para_test.html">ParaTest</a> before executing the test suite.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md8690"></a>
PCOV</h3>
<p>If you have installed <span class="tt">pcov</span> but need to enable it only while running tests, you have to pass thru the needed PHP binary option:</p>
<div class="fragment"><div class="line">php -d pcov.enabled=1 vendor/bin/paratest --passthru-php=&quot;&#39;-d&#39; &#39;pcov.enabled=1&#39;&quot;</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md8691"></a>
xDebug</h3>
<p>If you have <span class="tt">xDebug</span> installed, activating it by the environment variable is enough to have it running even in the subprocesses:</p>
<div class="fragment"><div class="line">XDEBUG_MODE=coverage vendor/bin/paratest</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md8692"></a>
Initial setup for all tests</h2>
<p>Because <a class="el" href="namespace_para_test.html">ParaTest</a> runs multiple processes in parallel, each with their own instance of the PHP interpreter, techniques used to perform an initialization step exactly once for each test work different from <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a>. The following pattern will not work as expected - run the initialization exactly once - and instead run the initialization once per process:</p>
<div class="fragment"><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> $initialized = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">function</span> setUp(): void</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (! self::$initialized) {</div>
<div class="line">         self::initialize();</div>
<div class="line">         self::$initialized = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This is because static variables persist during the execution of a single process. In parallel testing each process has a separate instance of <span class="tt">$initialized</span>. You can use the following pattern to ensure your initialization runs exactly once for the entire test invocation:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> $initialized = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">function</span> setUp(): void</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (! self::$initialized) {</div>
<div class="line">        <span class="comment">// We utilize the filesystem as shared mutable state to coordinate between processes</span></div>
<div class="line">        touch(<span class="stringliteral">&#39;/tmp/test-initialization-lock-file&#39;</span>);</div>
<div class="line">        $lockFile = fopen(<span class="stringliteral">&#39;/tmp/test-initialization-lock-file&#39;</span>, <span class="charliteral">&#39;r&#39;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempt to get an exclusive lock - first process wins</span></div>
<div class="line">        <span class="keywordflow">if</span> (flock($lockFile, LOCK_EX | LOCK_NB)) {</div>
<div class="line">            <span class="comment">// Since we are the single process that has an exclusive lock, we run the initialization</span></div>
<div class="line">            self::initialize();</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="comment">// If no exclusive lock is available, block until the first process is done with initialization</span></div>
<div class="line">            flock($lockFile, LOCK_SH);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        self::$initialized = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md8693"></a>
Troubleshooting</h2>
<p>If you run into problems with <span class="tt">paratest</span>, try to get more information about the issue by enabling debug output via <span class="tt">--verbose --debug</span>.</p>
<p>When a sub-process fails, the originating command is given in the output and can then be copy-pasted in the terminal to be run and debugged. All internal commands run with <span class="tt">--printer [...]\NullPhpunitPrinter</span> which silence the original <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> output: during a debugging run remove that option to restore the output and see what <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> is doing.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8694"></a>
Caveats</h2>
<ol type="1">
<li>Constants, static methods, static variables and everything exposed by test classes consumed by other test classes (including Reflection) are not supported. This is due to a limitation of the current implementation of <span class="tt">WrapperRunner</span> and how <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> searches for classes. The fix is to put shared code into classes which are not tests <em>themselves</em>.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8695"></a>
Integration with PHPStorm</h2>
<p><a class="el" href="namespace_para_test.html">ParaTest</a> provides a dedicated binary to work with PHPStorm; follow these steps to have <a class="el" href="namespace_para_test.html">ParaTest</a> working within it:</p>
<ol type="1">
<li>Be sure you have <a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a> already configured in PHPStorm: <a href="https://www.jetbrains.com/help/phpstorm/using-phpunit-framework.html#php_test_frameworks_phpunit_integrate">https://www.jetbrains.com/help/phpstorm/using-phpunit-framework.html#php_test_frameworks_phpunit_integrate</a></li>
<li>Go to <span class="tt">Run</span> -&gt; <span class="tt">Edit configurations...</span></li>
<li>Select <span class="tt">Add new Configuration</span>, select the <span class="tt"><a class="el" href="namespace_p_h_p_unit.html">PHPUnit</a></span> type and name it <span class="tt"><a class="el" href="namespace_para_test.html">ParaTest</a></span></li>
<li>In the <span class="tt">Command Line</span> -&gt; <span class="tt">Interpreter options</span> add <span class="tt">./vendor/bin/paratest_for_phpstorm</span></li>
<li>Any additional <a class="el" href="namespace_para_test.html">ParaTest</a> options you want to pass to <a class="el" href="namespace_para_test.html">ParaTest</a> should go within the <span class="tt">Test runner</span> -&gt; <span class="tt">Test runner options</span> section</li>
</ol>
<p>You should now have a <span class="tt"><a class="el" href="namespace_para_test.html">ParaTest</a></span> run within your configurations list. It should natively work with the <span class="tt">Rerun failed tests</span> and <span class="tt">Toggle auto-test</span> buttons of the <span class="tt">Run</span> overlay.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md8696"></a>
Run with Coverage</h3>
<p>Coverage with one of the available coverage engines must already be <a href="https://www.jetbrains.com/help/phpstorm/code-coverage.html">configured in PHPStorm</a> and working when running tests sequentially in order for the helper binary to correctly handle code coverage</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8697"></a>
For Contributors: testing ParaTest itself</h1>
<p>Before creating a Pull <a class="el" href="class_request.html">Request</a> be sure to run all the necessary checks with <span class="tt">make</span> command. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c5da75fdc1d6c57999112ed830c87a3c.html">vendor</a></li><li class="navelem"><a href="dir_5e266169aa8538daef4e67b2cacbd392.html">brianium</a></li><li class="navelem"><a href="dir_78905efdeeff7fd5c1fe6dfe1d3b7f77.html">paratest</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
